language: python
matrix:
  include:
    - os: linux
      sudo: required
      python: 2.7
      env: TOXENV=py27
    - os: linux
      sudo: required
      python: 3.5
      env: TOXENV=py35
    - os: osx
      language: generic
      env: TOXENV=py27
    - os: osx
      language: generic
      env: TOXENV=py35
install:
  - source install_conda.sh
  - export PATH="$HOME/miniconda/bin:$PATH"
  - hash -r
  - conda config --set always_yes yes --set changeps1 no
  - conda update -q conda
  # Useful for debugging any issues with conda
  - conda info -a
  - conda install conda-build anaconda-client
  - conda config --add channels matsci
  - conda config --set anaconda_upload yes
  - pip install pip --upgrade
  - pip install -q -r requirements.txt --upgrade
before_script:
  - anaconda logout
  - anaconda login --username $ANACONDA_USER --password $ANACONDA_PASSWORD
script: invoke build_all --nopy27
notifications:
  email:
    recipients:
      - shyuep@gmail.com
    on_success: always
    on_failure: always
